<!doctype html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" charset="utf-8"/>
    <script type="text/javascript" src="createQR/src/jquery.min.js"></script>
    <script type="text/javascript" src="createQR/src/qrcode.js"></script>
    <script src="https://cdn.rawgit.com/ethereum/web3.js/develop/dist/web3.js"></script>
    <script type="text/javascript" src="./web3/bower_components/web3/dist/web3.min.js"></script>
    <title>WALLET :: KNU COIN</title>
    <style>
    .home
    {
        float:right;
        width:100%;
        padding-top:20px;
        padding-right:80px;
        text-align:right;
    }
    .title
    {
        float:left;
        width:100%;
        margin:0 auto;
        text-align:center;
    }
    .contents
    {
        float:left;
        width:100%;
        margin:0 auto;
        text-align:center;
    }
</style>
</head>
<body>
    <div class="home">
        <a href="setup-finish.html">
            <img src="images/main/gotomain.png" alt="gotoMain">
        </a>
    </div>
    <div class="banner">
        <div class="title">
            <a href="wallet.html">
                <img src="images/main/wallet_title.png" alt="WALLET">
            </a>
        </div>
    </div>
    <div class="contents" margin-left:500px>
        <!-- <iFrame Name=mains width=1200px height=1000px Scrolling=no 
            MarginWidth=0 MarginHeight=0 FrameBorder=0></iFrame> -->
            <input id="address" type="text"  style="width:50%" /><br />
            <button onClick="createWallet()">Create Wallet</button><br/>
            <!--<input id="text" type="text"  style="width:50%" /><br />-->
            <button onclick="makeCode()">Generate</button>
            <div id="qrcode" style="width:100px; height:100px; margin-top:15px; margin-left:500px"></div>

            <!--  <script>
                var Web3 = require("web3");
                web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
                var account = web3.eth.accounts[0];
                console.log(account);
            </script> -->

            <script type="text/javascript">
                var Web3 = require("web3");
                web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
                // var Accounts = require('web3-eth-accounts');
                // var accounts = new Accounts('ws://localhost:8546');
                var account = web3.eth.accounts[0];
                console.log(account);

                var qrcode = new QRCode(document.getElementById("qrcode"), {
                    width : 200,
                    height : 200
                });

                function makeCode () {
                    var elText = document.getElementById("address");
                    if (!elText.value) {
                        alert("Input a text");
                        elText.focus();
                        return;
                    }
                    qrcode.makeCode(elText.value);
                }

                function createWallet(){
                    var password;
                    var input = prompt("Please enter your password");
                    if (input==null || input==""){
                        password="invalid password"
                    }
                    else{
                        password=input;
                    }
                    // web3.eth.personal.newAccount(password).then(console.log);
                    var newAccount = web3.personal.newAccount(password);
                    var length = web3.eth.accounts.length-1;
                    console.log(web3.eth.accounts);
                    document.getElementById("address").value=web3.eth.accounts[length];

                    //var wallet = "0x08297DAFf692a44ED2d2683b3F57F609606C237E"
                    //document.getElementById('address').value=wallet;
                }


            </script>

           
        </div>

    </body>
    </html>